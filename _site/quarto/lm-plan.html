<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Stacy DeRuiter">
<meta name="dcterms.date" content="2025-02-17">

<title>Model Planning for Inference – Applied Regression with R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../quarto/lm-fit.html" rel="next">
<link href="../quarto/graphics-code.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-868b9742d7bde9f1698ef1c41a43f714.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="../site_libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="include/webex.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Applied Regression with R</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../quarto/lm-plan.html">Linear Models</a></li><li class="breadcrumb-item"><a href="../quarto/lm-plan.html">Model Planning for Inference</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Applied Regression in R</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">R Basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quarto/install-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Install R/RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quarto/r-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quarto/how-to-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using Quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quarto/math-notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mathematical Notation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quarto/r-results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Results in Text</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Visualization</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quarto/graphics-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Designing Data Visualizations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quarto/graphics-choose.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Choosing a Graph Type</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quarto/graphics-code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Code Examples</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Linear Models</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quarto/lm-plan.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Model Planning for Inference</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quarto/lm-fit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model Fitting and Equation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quarto/lm-assess.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model Assessment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quarto/lm-interp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interpretation and Inference</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quarto/lm-interp-more.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">More Inference</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#preface-whats-a-model" id="toc-preface-whats-a-model" class="nav-link active" data-scroll-target="#preface-whats-a-model">Preface: What’s a Model?</a></li>
  <li><a href="#section-learning-outcomes" id="toc-section-learning-outcomes" class="nav-link" data-scroll-target="#section-learning-outcomes">Section Learning Outcomes</a></li>
  <li><a href="#text-reference" id="toc-text-reference" class="nav-link" data-scroll-target="#text-reference">Text Reference</a></li>
  <li><a href="#sampling-strategies-optional" id="toc-sampling-strategies-optional" class="nav-link" data-scroll-target="#sampling-strategies-optional">Sampling Strategies (<em>optional</em>)</a></li>
  <li><a href="#sampling-infographic-optional" id="toc-sampling-infographic-optional" class="nav-link" data-scroll-target="#sampling-infographic-optional">Sampling Infographic (<em>optional</em>)</a></li>
  <li><a href="#study-design-optional" id="toc-study-design-optional" class="nav-link" data-scroll-target="#study-design-optional">Study Design (<em>optional</em>)</a>
  <ul class="collapse">
  <li><a href="#an-alternative" id="toc-an-alternative" class="nav-link" data-scroll-target="#an-alternative">An Alternative</a></li>
  <li><a href="#why-randomization" id="toc-why-randomization" class="nav-link" data-scroll-target="#why-randomization">Why Randomization?</a></li>
  <li><a href="#random-sample-vs-randomization" id="toc-random-sample-vs-randomization" class="nav-link" data-scroll-target="#random-sample-vs-randomization">Random SAMPLE vs RANDOMIZATION</a></li>
  </ul></li>
  <li><a href="#observational-vs-experimental-studies-optional" id="toc-observational-vs-experimental-studies-optional" class="nav-link" data-scroll-target="#observational-vs-experimental-studies-optional">Observational vs Experimental Studies (<em>optional</em>)</a>
  <ul class="collapse">
  <li><a href="#even-more" id="toc-even-more" class="nav-link" data-scroll-target="#even-more">Even more</a></li>
  </ul></li>
  <li><a href="#model-planning-motivation" id="toc-model-planning-motivation" class="nav-link" data-scroll-target="#model-planning-motivation">Model Planning Motivation</a></li>
  <li><a href="#response-and-predictors" id="toc-response-and-predictors" class="nav-link" data-scroll-target="#response-and-predictors">Response and Predictors</a></li>
  <li><a href="#expertise" id="toc-expertise" class="nav-link" data-scroll-target="#expertise">Expertise</a></li>
  <li><a href="#dataset-size-n15-rule" id="toc-dataset-size-n15-rule" class="nav-link" data-scroll-target="#dataset-size-n15-rule">Dataset Size (n/15 rule)</a></li>
  <li><a href="#causation-revisited" id="toc-causation-revisited" class="nav-link" data-scroll-target="#causation-revisited">Causation Revisited</a>
  <ul class="collapse">
  <li><a href="#mediators-moderators-precision-covariates" id="toc-mediators-moderators-precision-covariates" class="nav-link" data-scroll-target="#mediators-moderators-precision-covariates">Mediators, Moderators, Precision Covariates</a></li>
  </ul></li>
  <li><a href="#whats-a-causal-diagram" id="toc-whats-a-causal-diagram" class="nav-link" data-scroll-target="#whats-a-causal-diagram">What’s a Causal Diagram?</a></li>
  <li><a href="#variable-types" id="toc-variable-types" class="nav-link" data-scroll-target="#variable-types">Variable Types</a>
  <ul class="collapse">
  <li><a href="#precision-covariate" id="toc-precision-covariate" class="nav-link" data-scroll-target="#precision-covariate">Precision Covariate</a></li>
  <li><a href="#mediator" id="toc-mediator" class="nav-link" data-scroll-target="#mediator">Mediator</a></li>
  <li><a href="#confounder" id="toc-confounder" class="nav-link" data-scroll-target="#confounder">Confounder</a></li>
  <li><a href="#collider" id="toc-collider" class="nav-link" data-scroll-target="#collider">Collider</a></li>
  <li><a href="#moderator" id="toc-moderator" class="nav-link" data-scroll-target="#moderator">Moderator</a></li>
  <li><a href="#more" id="toc-more" class="nav-link" data-scroll-target="#more">More</a></li>
  </ul></li>
  <li><a href="#more-reference-drill" id="toc-more-reference-drill" class="nav-link" data-scroll-target="#more-reference-drill">More Reference &amp; Drill</a></li>
  <li><a href="#summary-causal-diagrams" id="toc-summary-causal-diagrams" class="nav-link" data-scroll-target="#summary-causal-diagrams">Summary: Causal Diagrams</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/stacyderuiter/applied-regression/edit/main/quarto/lm-plan.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/stacyderuiter/applied-regression/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../quarto/lm-plan.html">Linear Models</a></li><li class="breadcrumb-item"><a href="../quarto/lm-plan.html">Model Planning for Inference</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Model Planning for Inference</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Stacy DeRuiter </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 17, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="preface-whats-a-model" class="level2">
<h2 class="anchored" data-anchor-id="preface-whats-a-model">Preface: What’s a Model?</h2>
<p>We will spend most of this course learning to fit different kinds of <em>regression models</em>. What are they?</p>
<p>We will learn as we go. But as a starting point…</p>
<ul>
<li>In a regression model, we have one main <strong>response</strong> or <strong>outcome</strong> variable of interest</li>
<li>We want to assess whether our response variable is or isn’t associated with (some of) a suite of possible <strong>predictor</strong> variables (also sometimes known as <em>covariates</em> but we’ll avoid the word “covariates” because it sometimes means slightly different things in different disciplines).</li>
</ul>
<p>Essentially, we are looking to quantify relationships between our response and predictor(s) – accompanied by appropriate measures of the uncertainty of our estimates.</p>
</section>
<section id="section-learning-outcomes" class="level2">
<h2 class="anchored" data-anchor-id="section-learning-outcomes">Section Learning Outcomes</h2>
<p>This section, we will learn strategies for planning a regression model - how many variables, and which ones, should be included as predictors? How does an analyst decide? What principles underlie these decisions?</p>
<p>By the end of the section you will:</p>
<ol type="1">
<li>Define a causal diagram, and the variable types that can be depicted in one</li>
<li>Use a causal diagram to determine which variables to include as predictors in a regression model</li>
<li>Apply the n/15 rule-of-thumb in model planning, to determine how many coefficients can be reliably estimated with a given dataset</li>
<li>Combine a causal diagram, the n/15 rule, and a modeling goal to articulate a well-reasoned plan for a multiple linear regression model</li>
</ol>
<p>Along the way, we will also review some introductory stat material on study design and types of experiments, to make sure we are all have the same vocabulary in place. You won’t be directly assessed on this material and so it is marked as optional.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://imgs.xkcd.com/comics/correlation.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
<p><em>Comic from <a href="https://xkcd.com/552/">xkcd</a></em></p>
</section>
<section id="text-reference" class="level2">
<h2 class="anchored" data-anchor-id="text-reference">Text Reference</h2>
<p>Recommended reading for the materials covered in this tutorial can be found in:</p>
<ul>
<li><a href="https://bookdown.org/roback/bookdown-BeyondMLR/ch-MLRreview.html#review-of-multiple-linear-regression" target="_blank"><em>Beyond Multiple Linear Regression</em> Ch. 1.4-1.6</a></li>
<li><em>Ecological Models &amp; Data in R</em> Ch. 9</li>
<li><a href="https://stacyderuiter.github.io/regression/lm1.html" target="_blank">Course Notes Chapter 1</a></li>
<li><em>Statistical Modeling: A Fresh Approach</em> <a href="https://statistical-modeling.netlify.app/18-causation.html" target="_blank">Chapter 18</a></li>
<li>See also: <a href="https://royalsocietypublishing.org/doi/10.1098/rspb.2020.2815">A biologist’s guide to causal inference</a></li>
</ul>
<p>It’s suggested that you read these chapters <em>after</em> doing this tutorial, with particular focus on the topics you found most challenging.</p>
</section>
<section id="sampling-strategies-optional" class="level2">
<h2 class="anchored" data-anchor-id="sampling-strategies-optional">Sampling Strategies (<em>optional</em>)</h2>
<p>Almost every dataset contains information on a <em>sample</em> of cases from a larger <em>population</em>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pop-sample-param-stat.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
<p>And if the sample is biased – that is, not representative of the full population in important ways – then we won’t be able to make any valid inferences from it. So the process used to choose a sample is crucial to the validity of all results! What are ways to choose a sample?</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/be9e-Q-jC-0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">
</iframe>
</section>
<section id="sampling-infographic-optional" class="level2">
<h2 class="anchored" data-anchor-id="sampling-infographic-optional">Sampling Infographic (<em>optional</em>)</h2>
<p>Here’s an infographic version of the main ideas here, in infographic form. This infographic includes a couple additional sampling approaches that are used in human health studies, and also introduces one more bit of terminology: <em>probability</em> vs.&nbsp;<em>non-probability</em> sampling. In probability methods, there is some element of random selection that is used; in non-probability samping, there is not.</p>
<p><em>You can also <a href="https://www.slideshare.net/Intellspot/types-of-sampling-methods-infographic">view the infographic on the web</a>.</em></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/sampling-schemes-infographic.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="study-design-optional" class="level2">
<h2 class="anchored" data-anchor-id="study-design-optional">Study Design (<em>optional</em>)</h2>
<p>A crucial distinction is between two broad classes of research studies: <em>observational</em> studies and <em>experimental</em> studies.</p>
<p><em>Side note: many students in the sciences find that the statistical definition of an “experimental study” doesn’t mesh perfectly with the definition of an “experiment” that they learn in science courses. If it helps, you can think of “experiment” keeping the colloquial meaning it has in your field, and think of “experimental study” as a technical statistical descriptor of a study (as we will learn it today).</em></p>
<p>You probably have prior knowledge or a good intuitive guess as to the difference between studies that are observational and experimental. We’ll review key concepts more later on, but to start, take a chance to assess your existing hunches. Study the infographic below with this distinction in mind: <strong>Does the infographic confirm, modify, or add nuance to your initial idea of how “observational” and “experimental” studies differ?</strong> As a bonus, the image also details a few kinds of studies within each broad class, and orders them in terms of the strength of evidence they can provide.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i0.wp.com/www.compoundchem.com/wp-content/uploads/2015/04/A-Rough-Guide-to-Types-of-Scientific-Evidence.png?ssl=1" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<section id="an-alternative" class="level3">
<h3 class="anchored" data-anchor-id="an-alternative">An Alternative</h3>
<p>You may spend less time with this one - but here’s <a href="https://www.nih.gov/sites/default/files/about-nih/public-trust/clinical-trials-infographic.pdf">an alternative infographic</a> covering much of the same information. It’s organized differently, but consistent - dive in if you’d like to review again!</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/study-types-infographic.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<p>One thing to notice in this version is the emphasis on <strong>randomized experimental studies</strong> like clinical trials as a source of possible <strong>causal conclusions</strong> – the NIH notes that a randomized experiment has the best chance of allowing researchers to conclude that one thing <em>causes</em> another, while that is difficult to impossible in observational work. Why?</p>
</section>
<section id="why-randomization" class="level3">
<h3 class="anchored" data-anchor-id="why-randomization">Why Randomization?</h3>
<p><em>Randomization</em> is a key tactic for ensuring the results of an experimental study are reliable, and providing a strong basis for concluding that a particular treatment or intervention <em>causes</em> a certain outcome or result.</p>
<p>Randomization means participants are <em>assigned randomly</em> to different “treatments;” they are randomly chosen to receive different assigned values of the key variable(s) that researchers are controlling or manipulating. If this procedure is not followed, then the different treatment groups may differ systematically in some important feature (like gender, motivation, initial health status - anything that might influence the outcome). Here’s one more video that explains the issue quite clearly, in the context of human randomized controlled trials:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/MmpF1zxfQZ8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">
</iframe>
<p><em>You can also watch it <a href="https://www.youtube.com/watch?v=MmpF1zxfQZ8">outside the tutorial</a>.</em></p>
</section>
<section id="random-sample-vs-randomization" class="level3">
<h3 class="anchored" data-anchor-id="random-sample-vs-randomization">Random SAMPLE vs RANDOMIZATION</h3>
<p>Careful! Many students confuse random sampling with randomization, or use one term when they mean the other. Check your understanding: which is which?</p>
<div class="webex-check webex-box">
<div class="cell" data-layout-align="center">
What is the difference between random sampling and randomization?
<div id="radio_BDQKBSBSAF" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_BDQKBSBSAF" value=""> <span>Randomization has to do with how cases to study are randomly chosen from the population, while random sampling has to do with how already-chosen participants are randomly assigned to experimental treatment groups.</span></label><label><input type="radio" autocomplete="off" name="radio_BDQKBSBSAF" value=""> <span>It depends on the context; they are very similar</span></label><label><input type="radio" autocomplete="off" name="radio_BDQKBSBSAF" value="answer"> <span>Random sampling has to do with how cases to study are randomly chosen from the population, while randomization has to do with how already-chosen participants are randomly assigned to experimental treatment groups.</span></label>
</div>
</div>
</div>
<div class="webex-solution">
<button>
Click for explanations of solution above.
</button>
<p>The words seem similar, but are distinct technical terms!</p>
<p><em>Randomization</em> has to do with how values of a “treatment” variable of special interest are assigned: randomly!</p>
<p><em>Random sampling</em> means that the individuals (whether they are people, places, or things…) in the study were selected from the population at random.</p>
</div>
</section>
</section>
<section id="observational-vs-experimental-studies-optional" class="level2">
<h2 class="anchored" data-anchor-id="observational-vs-experimental-studies-optional">Observational vs Experimental Studies (<em>optional</em>)</h2>
<p>We mentioned earlier that the key distinction for us will be between observational and experimental studies. Hopefully you’ve already started to form a mental map of the differences. Here’s one of the most clear, concise, complete statements of the main ideas I’ve ever heard:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/RSSFS9XWMG0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">
</iframe>
<p><em>You can also <a href="https://www.youtube.com/watch?v=RSSFS9XWMG0">watch outside this tutorial.</a></em></p>
<p>And now, a one-minute review of the basics:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/kaoWPEzvf9A" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">
</iframe>
<p><em>You can also <a href="https://www.youtube.com/watch?v=kaoWPEzvf9A">watch outside this tutorial.</a></em></p>
<p>By now, you should be able to provide a short definition of each study type and note key differences between <em>observational</em> and <em>experimental</em> studies.</p>
<section id="even-more" class="level3">
<h3 class="anchored" data-anchor-id="even-more">Even more</h3>
<p>If you would like to know more about some of the other study types featured in the infographics but not discussed in detail so far, you can check out the <strong>optional video</strong> below:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/iCgC32Cf8ac" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">
</iframe>
<p><em>You can also watch <a href="https://www.youtube.com/watch?v=iCgC32Cf8ac">outside this tutorial</a>.</em></p>
</section>
</section>
<section id="model-planning-motivation" class="level2">
<h2 class="anchored" data-anchor-id="model-planning-motivation">Model Planning Motivation</h2>
<p>Just as we <em>imagine</em> before we start coding to create graphics, we ought to <em>think</em> before we start fitting models.</p>
<p>Traditional ways of interpreting statistical results are premised on the idea that you made a plan, got some data, fitted the model you planned, and want to draw conclusions.</p>
<p>If, instead, you got data, scrutinized the data, fitted lots of different models, and now want to report results from the one that fitted best…well, generally things tend to go wrong. This is especially true if you use the data to lead you from a more complex to a simpler model. As Harrell (2015) points out in section 4.3, the problems are huge:</p>
<ul>
<li>Uncertainty <em>underestimated</em> (overconfidence: standard errors and confidence intervals too small, <span class="math inline">\(R^2\)</span> too big, unfounded confidence that associations are real when they may not be).</li>
<li>Spurious relationships look important and slope estimates are biased high</li>
<li>If testing hypotheses, p-values <em>too small</em></li>
</ul>
<p>How can we avoid these problems? Some more insight will come when we consider model assessment and selection in future sections. For now, we need to remember:</p>
<blockquote class="blockquote">
<p>Fitting and interpreting <strong>one</strong> well-considered, sensible model is prefereable to trying many things and then trying to choose among them later.</p>
</blockquote>
</section>
<section id="response-and-predictors" class="level2">
<h2 class="anchored" data-anchor-id="response-and-predictors">Response and Predictors</h2>
<p>A regression model is our attempt to quantify how a <strong>response variable</strong> of interest changes when a set of <strong>predictor variables</strong> change.</p>
<p>So, to begin, we need to identify our (one) response variable – the thing we are most interested in measuring or predicting or describing or understanding.</p>
<p>Then, we need to identify a set of predictor variables that we expect to be associated with changes in the response. (If we are planning an experiment, they should be variables we can collect data on; if working with data already collected, they must be in or derived from the data available.)</p>
<p>How do we choose which predictors to include, and how many?</p>
</section>
<section id="expertise" class="level2">
<h2 class="anchored" data-anchor-id="expertise">Expertise</h2>
<p>First, rely on experts and previous experience. If you know the context of the problem well, <em>you</em> have a good sense of the predictors that will be of interest. If you don’t, then you should consult experts (or published work on the topic).</p>
<p>There are also practical limits on the number of predictors you can reasonably consider, given a dataset.</p>
</section>
<section id="dataset-size-n15-rule" class="level2">
<h2 class="anchored" data-anchor-id="dataset-size-n15-rule">Dataset Size (n/15 rule)</h2>
<p>One important consideration, when planning a regression model, is: <em>How many predictors can I reasonably include?</em></p>
<p>It depends on the size of the dataset: it takes several observations to get a good estimate of any statistics, so it makes sense that fitting a model with <em>lots</em> of predictors will require a bigger dataset. Each additional observation may add a little bit more capacity for fitting a more complex model.</p>
<p>And if you try to fit too many, the chances of <em>overfitting</em> increase. <em>Overfitting</em> is when you model noise as well as signal, capturing in your model apparent relationships that actually exist only in the current dataset, not in reality.</p>
<p>For linear regression, Harrell (2015, Chapter 4.6) offers a rule of thumb: the number of parameters being estimated, <span class="math inline">\(p\)</span>, should be less than <span class="math inline">\(\frac{n}{10}\)</span> or <span class="math inline">\(\frac{n}{20}\)</span>. To give just one standard rule of thumb, we should aim for <span class="math inline">\(p &lt; \frac{n}{15}\)</span>. <span class="math inline">\(n\)</span> is the sample size (number of rows in the dataset).</p>
<p>This “n/15 rule” is a very rough rule of thumb - sometimes it seems you can get away with estimating a few more parameters than it says, and sometimes fewer (particularly in the case of categorical predictors where the observations are not evenly distributed across combinations of categories). But it gives us a reality check and a starting point for planning.</p>
<p>Remember, n/15 is a <em>ceiling</em> – and upper limit on the number of parameters you could estimate. It’s not a goal! You may have less.</p>
</section>
<section id="causation-revisited" class="level2">
<h2 class="anchored" data-anchor-id="causation-revisited">Causation Revisited</h2>
<p>In most intro stat courses, students learn to repeat statements like: “Correlation doesn’t imply causation, and only randomized experimental studies can draw causal conclusions.”</p>
<p><em>Well…kind of.</em></p>
<p>In data science, big observational datasets (collected in the absense of a structured study design) are really common. There are also <em>many</em> scenarios of interest where randomized experiments are just not possible on practical and ethical grounds.</p>
<p>Some blatant examples: experiments in which people were randomly assigned to dislocate their shoulders to investigate factors influencing recovery, or start smoking to see if they get cancer, or expose themselves to someone with a contagious disease to see if they become ill.&nbsp;In many situations, observational work is the <em>only</em> real option. What’s a researcher to do?</p>
<p>In recent decades the field of <em>causal inference</em> has made great strides in thinking intelligently about how best to make the most reliable conclusions possible about cause and effect, when observational data is all you have. To begin to understand, we have to define a few terms: <strong>direct causation</strong> vs.&nbsp;<strong>indirect causation,</strong> and three alternative situations: <strong>confounders,</strong> <strong>mediators,</strong> and <strong>colliders</strong>. This field is new and technical, but the next video is about the most concise and clear primer I know of (with concrete examples).</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Ak0SLQOAu-o" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">
</iframe>
<p><em>You may also <a href="https://www.youtube.com/watch?v=Ak0SLQOAu-o">watch it outside this tutorial.</a></em></p>
<section id="mediators-moderators-precision-covariates" class="level3">
<h3 class="anchored" data-anchor-id="mediators-moderators-precision-covariates">Mediators, Moderators, Precision Covariates</h3>
<p>OK, wait a sec.&nbsp;The video didn’t cover <strong>mediators</strong>! A mediator is another term for what the video called an “indirect cause” – a link in the middle of a causal chain. The mediator explains or is part of the process by which an upstream cause leads to an effect.</p>
<p>There are two other variable types it may be useful to name, too:</p>
<ul>
<li><strong>Precision covariates</strong> affect the response variable of interest, without having any causal links at all to the “main” predictor of interest. We <em>include</em> them in models when we can, to get more <em>precise</em> estimates.</li>
<li><strong>Moderators</strong> <em>interact</em> with the main predictor of interest. The cause-effect relationship between the main predictor and the response <em>varies</em> depending on the value of the moderator variable. (Moderators might additionally affect the predictor and/or the response directly, so they may share some features with precision covariates and confounders.)</li>
</ul>
</section>
</section>
<section id="whats-a-causal-diagram" class="level2">
<h2 class="anchored" data-anchor-id="whats-a-causal-diagram">What’s a Causal Diagram?</h2>
<p>A <strong>causal diagram</strong> is a picture mapping the causal relationships between key variables. They are used when researchers are interested in quantifying <em>causal</em> relationships between variables – not just, “is <em>X</em> associated with a change in <em>Y</em>?” but “does <em>X</em> <em>cause</em> a change in <em>Y</em>?”</p>
<p>To make causal conclusions with confidence outside the context of a randomized, controlled experimental study is a big challenge, and mapping out starting assumptions about relationships between variables is just the first part.</p>
<p>Even if we are not necessarily trying to make causal conclusions (<em>we</em> won’t be here, with observational data), when you model relationships of several variables, a causal diagram helps you make <em>smart, thoughtful</em> choices about the ones you <em>include in</em> your model and the ones you <em>leave out</em>.</p>
<p>The diagram surfaces your starting assumptions about relationships between variables. It makes your assumptions transparent (to others and to you!) and guides choices about what to include/exclude from a model.</p>
<p>People also call causal diagrams <strong>DAG</strong>s (for <strong>Directed Acyclic Graphs</strong>) since they are a specific application of that [broader] type of mathematical graph. So, every causal diagram is a DAG, but in math there can be DAGs that are not statistical causal diagrams.</p>
<p>In a causal diagram each box is a variable, and arrows connect causes to effects (with the arrowhead pointing from the cause to the effect).</p>
<!-- ## Drawing Causal Diagrams in R -->
<!-- To draw causal diagrams in R, we will use the package `dagitty` so make sure you have a `library()` calls for it before you start. -->
<!-- Run the R code provided and examine the results to get a sense for how `dagitty()` works. -->
<!-- ```{r, echo = TRUE, eval = FALSE} -->
<!-- library(dagitty) -->
<!-- ``` -->
<!-- <!-- note: works on server only, some make/js stuff needed on laptop -->
<p>–&gt;</p>
<!-- ```{r} -->
<!-- #| exercise: dag-1 -->
<!-- # create the DAG object -->
<!-- causal_diagram_1 <- dagitty('dag{ -->
<!--   A -> B; -->
<!--   B -> C; -->
<!--   C -> D -->
<!-- }') -->
<!-- # plot it -->
<!-- plot(causal_diagram_1) -->
<!-- ``` -->
<!-- Things to try: -->
<!-- - What kind of more-informative names can you use other than just A, B, C, etc? Are words okay? Spaces? (Hint: ) -->
<!-- - How do the -> relate to the arrows in the plot? -->
<!-- - What happens if you add or remove a line inside the `dag{}` specification? -->
</section>
<section id="variable-types" class="level2">
<h2 class="anchored" data-anchor-id="variable-types">Variable Types</h2>
<p>In a multi-variable analysis, there is often one key variable of interest (measuring “response” or “outcome” or “effect”) and another one which may influence it, and is the focus of greatest research interest (a key “predictor” or “cause”).</p>
<p>But there are generally other variables in the mix that are somehow relevant to understanding the predictor – response relationship. How can we classify (and diagram) them?</p>
<p>In all examples below, <strong>X</strong> is the predictor of greatest interest and <strong>Y</strong> is the response. (<strong>A</strong> is the other variable.) The definitions below all depend on a specific <strong>X</strong> and <strong>Y</strong> having been chosen: the other variable types are defined <em>relative</em> to the X-Y relationship.</p>
<section id="precision-covariate" class="level3">
<h3 class="anchored" data-anchor-id="precision-covariate">Precision Covariate</h3>
<p>Here’s an example of <strong>A</strong> acting as a <strong>precision covariate</strong>. Precision covariates are also known as <strong>competing exposures</strong>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/dag-precision-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="1800"></p>
</figure>
</div>
</div>
</div>
<p>Based on the diagram, can you explain in words what a <strong>precision covariate</strong> is?</p>
<div class="webex-solution">
<button>
Click for one definition…
</button>
<p>A precision covariate affects only the response variable.</p>
</div>
<p>Best practice is to <em>include</em> precision covariates in a model trying to measure the size of the effect of X on Y, to get the most <em>precise</em> estimates possible…but if you don’t, it won’t bias your estimate of the size of X’s influence on Y. Can you explain why?</p>
</section>
<section id="mediator" class="level3">
<h3 class="anchored" data-anchor-id="mediator">Mediator</h3>
<p>Here are two (slightly different) examples of <strong>A</strong> acting as a mediator. Based on the diagram (and the code), explain in words what a <strong>mediator</strong> is.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/dag-mediator-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="1800"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/dag-mediator-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="1800"></p>
</figure>
</div>
</div>
</div>
<p>Based on the diagrams, can you explain in words what a <strong>mediator</strong> is?</p>
<div class="webex-solution">
<button>
Click for one definition…
</button>
<p>A mediator is part of a chain of causes and effects, between the main predictor of interest and the response.</p>
<p>(You may also see mediation chains elsewhere in a diagram/scenario…for example, a chain of three causes/effects that together act as a precision covariate.)</p>
</div>
<p>How is this <em>different</em> from a precision covariate?</p>
<div class="webex-solution">
<button>
Hmm, not sure – show me how it’s different!
</button>
<p>A mediator is part of a chain of causes and effects, between the main predictor of interest and the response.</p>
<p>It affects the response, but unlike a precision covariate, it’s also affected <em>by</em> the predictor of interest.</p>
</div>
<p>If you have a situation like the first picture above, where there are no branches/only one single path from your predictor to the response, include only your predictor and that’s it.</p>
<p><strong>BUT</strong> if there are mediator(s) and if there <em>are</em> branches in the path(s), like the second picture above that’s when you have options.</p>
<p>If you want to estimate the <em>total effect</em> of the upstream predictor of interest, <em>exclude</em> the mediator(s). If you want to distinguish and quantify effects along several pathways (via the mediator in question, and another way), then include one variable along each branch whose influence you want to measure.</p>
<p>Both can be valid. Researchers have to choose which they <em>want</em> to do.</p>
</section>
<section id="confounder" class="level3">
<h3 class="anchored" data-anchor-id="confounder">Confounder</h3>
<p>Below is another causal diagram, in which A is a <strong>confounder</strong>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/dag-confounder-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="1800"></p>
</figure>
</div>
</div>
</div>
<p>Can you define “confounder” in words?</p>
<div class="webex-solution">
<button>
Click for one definition…
</button>
<p>A confounder affects <em>both</em> the predictor and the response.</p>
</div>
<p>If there is a <strong>confounder</strong> present and you <em>do not</em> include it in your model, then you may <em>wrongly conclude X causes Y</em>.</p>
<p>So best practice is to <em>include</em> all confounders in a model.</p>
</section>
<section id="collider" class="level3">
<h3 class="anchored" data-anchor-id="collider">Collider</h3>
<p><strong>Collider</strong> bias caused by collider variable A looks like:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/dag-collider-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="1800"></p>
</figure>
</div>
</div>
</div>
<p>A collider is <em>affected by</em> both the predictor and response. (Their influence arrows “collide” at the collider…)</p>
<p>Including a <strong>collider</strong> in a model designed to measure association between X and Y <em>can induce association where there is actually none</em> so best practice is to make sure you <strong>do not include colliders in models.</strong></p>
</section>
<section id="moderator" class="level3">
<h3 class="anchored" data-anchor-id="moderator">Moderator</h3>
<p>A variable that <em>moderates</em> (increases or decreases the size of) the causal link between two other variables is a <strong>Moderator.</strong></p>
<p>(If you have studied <em>interactions</em> before in the context of regression models, a cause and a moderator <em>interact</em> to influence the effect.)</p>
<p>Unfortunately <em>in our diagrams there is not really an adequate way to draw moderators</em> – for <a href="https://academic.oup.com/ije/article/51/4/1047/6607680">good reasons</a> – but here’s a diagram (from <a href="https://link.springer.com/article/10.1007/s40815-020-00848-3">Yoon 2020</a>) to help get a sense of the situation:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://media.springernature.com/full/springer-static/image/art%3A10.1007%2Fs40815-020-00848-3/MediaObjects/40815_2020_848_Fig1_HTML.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<p>If you think you have a moderator variable, best practice is to <em>include</em> it in your model <em>interacting</em> with <strong>X</strong>. (We will return to interactions in much more detail later on.)</p>
</section>
<section id="more" class="level3">
<h3 class="anchored" data-anchor-id="more">More</h3>
<p>There are more details and more complicated scenarios, of course. This is all you need to master to start with. If you want to explore more, check out <a href="https://cran.r-project.org/web/packages/ggdag/vignettes/bias-structures.html" class="uri">https://cran.r-project.org/web/packages/ggdag/vignettes/bias-structures.html</a></p>
</section>
</section>
<section id="more-reference-drill" class="level2">
<h2 class="anchored" data-anchor-id="more-reference-drill">More Reference &amp; Drill</h2>
<p>Check out the materials and interactive questions at: <a href="http://dagitty.net/learn/graphs/roles.html" class="uri">http://dagitty.net/learn/graphs/roles.html</a></p>
</section>
<section id="summary-causal-diagrams" class="level2">
<h2 class="anchored" data-anchor-id="summary-causal-diagrams">Summary: Causal Diagrams</h2>
<p>Soooo….what? How will this affect our work? Well, we will often be interested in the <em>association</em> or relationship between two key variables, a potential cause or “predictor” <strong>x</strong> and a potential effect or “response” <strong>y</strong>. Unless we have data from a randomized experimental study, we need to be clever about which <em>other</em> variables to include in our analysis to get the best, most accurate estimate of the <strong>x</strong> - <strong>y</strong> relationship:</p>
<ul>
<li>If there are any <em>confounders</em> we should <em>include</em> them in our models and analysis. This is often called <strong>controlling for</strong> the confounders’ effects.</li>
<li>If there is a <em>mediator</em>, you may have a choice.
<ul>
<li>If there are no branches/only one single path from your predictor to the response, include only your predictor and that’s it.</li>
<li>If there <em>are</em> branches in the path, that’s when you have options. If you want to estimate the <em>total effect</em> of the upstream predictor of interest, <em>exclude</em> the mediator(s). If you want to distinguish and quantify effects along several pathways (via the mediator in question, and another way), then include one variable along each branch whose influence you want to measure.</li>
</ul></li>
<li>If there are any <em>colliders</em> they should <em>not</em> be included in our models and analysis - including them would actually <em>reduce</em> the accuracy of our assessment of the <strong>x</strong> - <strong>y</strong> relationship</li>
</ul>
<p>Seems simple enough, right? There’s a catch. To decide whether something might be a collider or a confounder, you have to rely on your knowledge or belief about what causes what. Even experts don’t always agree. There <em>is not</em> usually a definite right answer that is easy to agree on. This is one thing that makes causal inference with observational data so hard, and contentious!</p>
<p>But closing your eyes to the issue and skipping the step of making a causal diagram <em>doesn’t solve anything at all.</em> Whatever model you fit is consistent with some causal diagrams, and not others. So by drawing the diagram as best you can, and designing your model accordingly, you are being transparent and explicit about your assumptions instead of keeping yourself and your audience ignorant that those assumptions exist, and have consequences.</p>
<p>My personal advice is: if in doubt, and if the data allow it, control for all the potentially important variables you can. The exception, of course, if is you are sure or quite sure the variable is a collider - in that case you definitely MUST exclude it.</p>


<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script>
<div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
WyJkYXRhL2hlaWdodHMuZHRhIiwiZGF0YS9ncmF0aXR1ZGUtZXhwZXJpbWVudC5jc3YiLCJkYXRhL01hbW1hbE1ldGFib2xpY1JhdGVzLmNzdiIsImRhdGEvZWxlcGhhbnRTdXJ2ZXkuY3N2IiwiZGF0YS91bml2ZXJzaXR5X3RlYWNoZXJzLmNzdiIsImRhdGEvSGFEaXZlUGFyYW1ldGVycy5jc3YiLCJkYXRhL0ZsaW50V2F0ZXJUZXN0SmFuTWFyMjAxNi5jc3YiLCJkYXRhL2dhcG1pbmRlcl9jbGVhbi5jc3YiLCJkYXRhL2Jvbm9ib19mYWNlcy5jc3YiXQ==
</script>
</section>

</main> <!-- /main -->
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../quarto";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../quarto/graphics-code.html" class="pagination-link" aria-label="Code Examples">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Code Examples</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../quarto/lm-fit.html" class="pagination-link" aria-label="Model Fitting and Equation">
        <span class="nav-page-text">Model Fitting and Equation</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/stacyderuiter/applied-regression/edit/main/quarto/lm-plan.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/stacyderuiter/applied-regression/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>